!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=7)}([function(e,t){e.exports=require("express")},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("passport")},function(e,t){e.exports=require("fs")},function(e,t){e.exports={database:"mongodb://database/checkerData",secretKey:"systemConfig"}},function(e,t,n){var o=n(1),s=n(18),r=o.Schema({name:{type:String},email:{type:String,required:!0},username:{type:String,required:!0},password:{type:String,required:!0}}),i=e.exports=o.model("User",r);e.exports.getUserById=function(e,t){i.findById(e,t)},e.exports.getUserByUsername=function(e,t){var n={username:e};i.findOne(n,t)},e.exports.addUser=function(e,t){s.genSalt(10,function(n,o){s.hash(e.password,o,function(n,o){if(n)throw n;e.password=o,e.save(t)})})},e.exports.comparePassword=function(e,t,n){s.compare(e,t,function(e,t){if(e)throw e;n(null,t)})}},function(e,t){e.exports=require("passport-jwt")},function(e,t,n){var o=n(0),s=n(8),r=(n(3),n(9)),i=n(10),u=n(1),a=(n(11),n(2)),c=n(4),d=n(12),f=n(14),p=n(16),l=o(),y=process.env.PORT||"3000";l.set("port",y),l.use(s()),l.use(i()),l.use(r.json()),l.use(r.urlencoded({extended:!1})),l.use(a.initialize()),l.use(a.session()),l.use(function(e,t,n){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),n()}),n(19)(a),u.connect(c.database,{useNewUrlParser:!0}),u.connection.once("open",function(){console.log("MongoDB database connection established successfully!")}),l.use("/user",p),l.use("/checkerData",d),l.use("/systemConfig",f),l.listen(y,function(){return console.log("Express server running on port ".concat(y))})},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("connect-busboy")},function(e,t){e.exports=require("path")},function(e,t,n){var o=n(0).Router(),s=n(3),r=n(2),i=n(13);o.route("/").get(r.authenticate("jwt",{session:!1}),function(e,t){i.find(function(e,n){e?console.log(e):t.json({code:"0",data:n})})}),o.route("/add").post(r.authenticate("jwt",{session:!1}),function(e,t){new i(e.body).save().then(function(e){t.status(200).json({message:"New Service Configuration Added successfully",code:"0"})}).catch(function(e){t.status(400).send({message:"Failed to create new record",code:"1"})})}),o.route("/update/:id").put(r.authenticate("jwt",{session:!1}),function(e,t){i.findById(e.params.id,function(n,o){if(!o)return next(new Error({message:"Could not load document",code:"1"}));for(var s in o)e.body.hasOwnProperty(s)&&(o[s]=e.body[s]);o.save().then(function(e){t.json({message:e["Service Type"]+" Updated successfully",code:"0"})}).catch(function(e){t.status(400).send({message:o["Service Type"]+" Update failed",code:"1"})})})}),o.route("/delete/:id").delete(r.authenticate("jwt",{session:!1}),function(e,t){i.findByIdAndRemove({_id:e.params.id},function(e,n){e?t.json({error:e,code:"1",message:"Failed to Delete the record"}):t.json({message:n["Service Type"]+" type record deleted successfully",code:"0"})})}),o.route("/upload").post(r.authenticate("jwt",{session:!1}),function(e,t,n){var o;e.busboy&&(e.busboy.on("file",function(e,n,r){o=s.createWriteStream(__dirname+"/../../public/serviceConfig/"+e+"/"+r),n.pipe(o),o.on("close",function(){t.json({success:!0,filename:r,actualPath:"public/serviceConfig/"+e+"/"+r,field:e.split("-").join(" ")})})}),e.busboy.on("finish",function(){}),e.pipe(e.busboy))}),e.exports=o},function(e,t,n){var o=n(1),s=new(0,o.Schema)({"Service Name":{type:String,default:""},"Service Description":{type:String,default:""},"Service Type":{type:String,required:!0},"Service Modes":{type:Array},"Result Confirmation":{type:String,default:""},"Session Timeout":{type:String,default:"0 Sec"},"Private Key Password":{type:String,default:""},"Server Certificate":{type:String,default:""},"Server Key":{type:String,default:""},"CA ceritficate":{type:String,default:""},"Verification Depth":{type:String,default:""},"Client verification mode":{type:String,default:""},"Use Session cache":{type:Boolean,default:!1},"Session Cache timeout":{type:String,default:"0 Sec"},"OCSP URI":{type:String,default:""},"On Exceeding SoR counter":{type:String,default:""},"SoR Error code":{type:String,default:""}});e.exports=o.model("AuthService",s)},function(e,t,n){var o=n(0),s=n(3),r=n(2),i=n(15),u=o.Router();u.route("/").get(r.authenticate("jwt",{session:!1}),function(e,t){i.find(function(e,n){e?console.log(e):t.json({code:"0",data:n})})}),u.route("/upload").post(r.authenticate("jwt",{session:!1}),function(e,t,n){var o;e.busboy&&(e.busboy.on("file",function(e,n,r){o=s.createWriteStream(__dirname+"/../../public/sysConfig/"+r),n.pipe(o),o.on("close",function(){t.json({success:!0,filename:r,actualPath:"/public/sysConfig/"+r})})}),e.busboy.on("finish",function(){}),e.pipe(e.busboy))}),u.route("/add").post(r.authenticate("jwt",{session:!1}),function(e,t){new i(e.body).save().then(function(e){t.status(200).json({message:"New Service Configuration Added successfully",code:"0"})}).catch(function(e){t.status(400).send({message:"Failed to create new record",code:"1"})})}),u.route("/update/:id").put(r.authenticate("jwt",{session:!1}),function(e,t){i.findById(e.params.id,function(n,o){if(!o)return next(new Error({message:"Could not load document",code:"1"}));for(var s in o)e.body.hasOwnProperty(s)&&(o[s]=e.body[s]);o.save().then(function(e){t.json({message:e["Instance ID"]+" Updated successfully",code:"0"})}).catch(function(e){t.status(400).send({message:o["Instance ID"]+" Update failed",code:"1"})})})}),e.exports=u},function(e,t,n){var o=n(1),s=new(0,o.Schema)({"Instance ID":{type:String,default:""},"Plmn ID":{type:String,default:""},"SSL Certificate":{type:String},"Thread count":{type:String},"Queue Size":{type:String,default:""},"Group ID":{type:String,default:""},"Routing Indicator":{type:String,default:""},"Range choice":{type:String,default:""},RangeInfo:{type:Array,default:[]}});e.exports=o.model("systemConfig",s)},function(e,t,n){var o=n(0).Router(),s=n(2),r=n(17),i=n(5),u=n(4);o.post("/register",function(e,t,n){var o=new i({name:e.body.name,email:e.body.email,username:e.body.username,password:e.body.password});i.addUser(o,function(e,n){e?t.json({success:!1,msg:"Failed to register user"}):t.json({success:!0,msg:"User registered"})})}),o.route("/checkUser").get(function(e,t){i.find(function(e,n){e?t.json({success:!1,msg:"Failed to get Data"}):t.json({success:!0,data:n})})}),o.put("/changePassword/:id",function(e,t){i.getUserById(e.params.id,function(n,o){if(!o)return next(new Error({message:"Could not load document",code:"1"}));i.comparePassword(e.body.oldPassword,o.password,function(n,s){if(n)throw n;if(!s)return t.json({success:!1,msg:"Wrong password"});for(var r in o)e.body.hasOwnProperty(r)&&(o[r]=e.body[r]);i.addUser(o,function(e,n){e?t.json({success:!1,msg:"Password cannot be updated"}):t.json({success:!0,msg:"Password updated Successfully"})})})})}),o.post("/authenticate",function(e,t,n){var o=e.body.username,s=e.body.password;i.getUserByUsername(o,function(e,n){if(e)throw e;if(!n)return t.json({success:!1,msg:"User not found"});i.comparePassword(s,n.password,function(e,o){if(e)throw e;if(!o)return t.json({success:!1,msg:"Wrong password"});var s=r.sign({data:n},u.secretKey,{expiresIn:604800});t.json({success:!0,token:"JWT "+s,user:{id:n._id,name:n.name,username:n.username,email:n.email}})})})}),o.get("/profile",s.authenticate("jwt",{session:!1}),function(e,t,n){i.find(function(n,o){n?t.status(400).json({success:!1,user:"unauthorized"}):t.status(200).json({success:!0,user:e.user})})}),e.exports=o},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("bcryptjs")},function(e,t,n){var o=n(6).Strategy,s=n(6).ExtractJwt,r=n(5),i=n(4);e.exports=function(e){var t={};t.jwtFromRequest=s.fromAuthHeaderWithScheme("jwt"),t.secretOrKey=i.secretKey,e.use(new o(t,function(e,t){r.getUserById(e.data._id,function(e,n){return e?t(e,!1):t(null,n||!1)})}))}}]);